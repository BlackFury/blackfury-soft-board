<include name="header.html" />
<include name="menu_header.html" />

<switch name="error">
	<div class="info">
		<h1>{LG_INFORMATION}</h1>
		<div>
			<div class="error">{CONTENT}</div>
		</div>
	</div>
</switch>

<call name="javascript" arg1="wysiwyg.js" />
<script type="text/javascript">
<!--
FSB_editor_lg = [];
FSB_editor_lg['ltab'] = '#addslashes{$LG_EDITOR_TEXT}';
FSB_editor_lg['ltab_explain'] = '#addslashes{$LG_EDITOR_TEXT_EXPLAIN}';
FSB_editor_lg['rtab'] = '#addslashes{$LG_EDITOR_WYSIWYG}';
FSB_editor_lg['rtab_explain'] = '#addslashes{$LG_EDITOR_WYSIWYG_EXPLAIN}';

var lg_max_chars = '{LG_USER_SIG_SIZE_CHARS}';
var lg_max_line = '{LG_USER_SIG_SIZE_LINE}';
var max_chars = {MAX_CHARS};
var max_line = {MAX_LINE};

function count_char(id, id_show_box)
{
	if (!$(id + '_wysiwyg'))
	{
		var len = ($(id)) ? $(id).value.length : 0;
		$(id_show_box).innerHTML = ((max_chars > 0) ? lg_max_chars + ((len) ? len + ' / ' : '0 / ') + max_chars : '') + '&nbsp; &nbsp; &nbsp;' + ((max_line > 0) ? lg_max_line + max_line : '');
	}
}
//-->
</script>

<form action="{U_ACTION}" method="post" onsubmit="textEditor['map_textarea_sig'].send()">
<switch name="preview">
	<div class="round">
		<h1>{LG_PREVIEW}</h1>
		<div class="content">
			<if content="$CFG_SIG_MAX_HEIGHT"><div style="max-height: {CFG_SIG_MAX_HEIGHT}px; overflow: hidden">{PREVIEW_SIG}</div><else>{PREVIEW_SIG}</if>
		</div>
	</div>
</switch>

<div class="round">
	<h1>{LG_USER_MODULE_SIG}</h1>
	<div class="content form">
		<block name="map">
			<div>
				<include name="handler_fsbcode.html" />
			</div>
			<div>
				<span style="font-weight: bold" id="show_count_char"></span><br />
				<div><textarea id="map_textarea_{map.NAME}" name="sig" style="height: 200px; width: 99%" onkeyup="count_char('map_textarea_sig', 'show_count_char')" onclick="close_box()">{USER_SIG}</textarea></div>
				<script type="text/javascript">
				<!--
				count_char('map_textarea_sig', 'show_count_char');
				//-->
				</script>
			</div>
		</block>

		<div>
			<input type="submit" name="preview" value="{LG_PREVIEW}" class="submit" /> &nbsp;
			<input type="submit" name="submit" value="{LG_SUBMIT}" class="submit" />
		</div>
	</div>
</div>
</form>

<include name="menu_footer.html" />
<include name="footer.html" />